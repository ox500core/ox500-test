#overlayLayer{
  position:absolute;
  inset:0;
  pointer-events:none;
  display:none;
  z-index:var(--z-overlay);
}
#overlayLayer.incident-overlay{
  display:block;
  opacity:0;
  will-change:opacity, transform, background-position;
}
#overlayLayer.incident-overlay.incident-intensity-subtle{
  --incident-opacity-max:.30;
  --incident-shade:.06;
}
#overlayLayer.incident-overlay.incident-intensity-normal{
  --incident-opacity-max:.48;
  --incident-shade:.10;
}
#overlayLayer.incident-overlay.incident-intensity-strong{
  --incident-opacity-max:.66;
  --incident-shade:.16;
}

#overlayLayer.incident-overlay.incident-scanline-burst{
  background:
    repeating-linear-gradient(
      0deg,
      rgba(var(--white-rgb),.14) 0 1px,
      transparent 1px 4px
    ),
    linear-gradient(
      90deg,
      rgba(var(--amber-rgb),var(--incident-shade,.10)),
      rgba(var(--cyan-rgb),var(--incident-shade,.10)),
      rgba(var(--amber-rgb),var(--incident-shade,.10))
    );
  mix-blend-mode:screen;
  animation:incident-scanline-burst var(--incident-burst-ms,560ms) steps(8,end) 1 both;
}

#overlayLayer.incident-overlay.incident-noise-grain{
  background:
    repeating-linear-gradient(
      90deg,
      rgba(var(--white-rgb),.08) 0 1px,
      transparent 1px 3px
    ),
    repeating-linear-gradient(
      0deg,
      rgba(var(--white-rgb),.07) 0 1px,
      transparent 1px 3px
    );
  mix-blend-mode:screen;
  animation:incident-noise-grain var(--incident-burst-ms,520ms) steps(6,end) 1 both;
}

#overlayLayer.incident-overlay.incident-signal-drop{
  background:rgba(0,0,0,.92);
  mix-blend-mode:multiply;
  animation:incident-signal-drop var(--incident-burst-ms,620ms) linear 1 both;
}

#overlayLayer.incident-overlay.incident-inverse-flash{
  background:rgba(var(--white-rgb),.94);
  mix-blend-mode:difference;
  animation:incident-inverse-flash var(--incident-burst-ms,460ms) steps(2,end) 1 both;
}

#overlayLayer.incident-overlay.incident-jitter-pulse{
  background:
    repeating-linear-gradient(
      0deg,
      rgba(var(--white-rgb),.08) 0 1px,
      transparent 1px 4px
    ),
    radial-gradient(
      circle at 50% 50%,
      rgba(var(--white-rgb),.10) 0 36%,
      transparent 78%
    );
  mix-blend-mode:screen;
  animation:incident-jitter-pulse var(--incident-burst-ms,560ms) steps(6,end) 1 both;
}

.hero.incident-jitter-pulse{
  will-change:transform;
  animation:incident-hero-jitter var(--incident-burst-ms,560ms) steps(2,end) 1;
}

@keyframes incident-scanline-burst{
  0%{opacity:0;background-position:0 0,0 0;}
  18%{opacity:var(--incident-opacity-max,.48);background-position:0 -9px,8px 0;}
  42%{opacity:calc(var(--incident-opacity-max,.48) * .55);background-position:0 -18px,-7px 0;}
  70%{opacity:calc(var(--incident-opacity-max,.48) * .86);background-position:0 -30px,11px 0;}
  100%{opacity:0;background-position:0 -36px,0 0;}
}

@keyframes incident-noise-grain{
  0%{opacity:0;background-position:0 0,0 0;}
  30%{opacity:calc(var(--incident-opacity-max,.48) * .68);background-position:4px 1px,-3px 2px;}
  60%{opacity:calc(var(--incident-opacity-max,.48) * .42);background-position:-4px -2px,5px -1px;}
  100%{opacity:0;background-position:0 0,0 0;}
}

@keyframes incident-signal-drop{
  0%{opacity:0;}
  16%{opacity:.18;}
  36%{opacity:.72;}
  56%{opacity:.48;}
  100%{opacity:0;}
}

@keyframes incident-inverse-flash{
  0%{opacity:0;}
  22%{opacity:.92;}
  48%{opacity:.44;}
  100%{opacity:0;}
}

@keyframes incident-jitter-pulse{
  0%{opacity:0;transform:translate3d(0,0,0);}
  24%{opacity:calc(var(--incident-opacity-max,.48) * .74);transform:translate3d(var(--incident-jitter-px,1.5px),0,0);}
  52%{opacity:calc(var(--incident-opacity-max,.48) * .48);transform:translate3d(calc(var(--incident-jitter-px,1.5px) * -1),0,0);}
  100%{opacity:0;transform:translate3d(0,0,0);}
}

@keyframes incident-hero-jitter{
  0%{transform:translate3d(0,0,0);}
  25%{transform:translate3d(var(--incident-jitter-px,1.5px),0,0);}
  50%{transform:translate3d(calc(var(--incident-jitter-px,1.5px) * -1),0,0);}
  100%{transform:translate3d(0,0,0);}
}

.hero{
  border:1px solid var(--border);
  border-radius:var(--radius-sm);
  background:rgba(var(--black-rgb),.22);
  position:relative;
  overflow:visible;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  padding:clamp(20px,3.5vw,40px);
  min-height:min-content;
}

.hero-mini{padding:var(--space-8) var(--space-9);}
.hero-mini .status,.hero-mini .feed{display:none;}
.hero-mini .title{font-size:clamp(28px,4.5vw,48px);letter-spacing:clamp(4px,1vw,10px);}
.hero-mini .subtitle{margin-top:var(--space-4);font-size:12px;letter-spacing:.16em;}
.hero-mini .controls{margin-top:var(--space-6);gap:var(--space-4);}

.hero::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:var(--radius-sm);
  background:
    radial-gradient(900px 420px at 50% 35%, rgba(var(--cyan-rgb),.12), transparent 72%),
    radial-gradient(680px 420px at 50% 75%, rgba(var(--amber-rgb),.08), transparent 75%);
  opacity:calc(.65 * var(--ui-glow-multiplier,1) * var(--signal-glow-intensity,1));
  pointer-events:none;
}
.hero>*{position:relative;z-index:var(--z-content);}

.title{
  font-size:var(--title-size);
  letter-spacing:var(--title-tracking);
  margin:0;
  padding:var(--space-2) 0;
  color:rgba(var(--white-rgb),.88);
  text-shadow:
    0 0 24px rgba(var(--cyan-rgb),calc(.18 * var(--ui-glow-multiplier,1) * var(--signal-glow-intensity,1))),
    0 0 10px rgba(var(--amber-rgb),calc(.12 * var(--ui-glow-multiplier,1) * var(--signal-glow-intensity,1)));
  line-height:1.1;
}

:is(.feed .label, .pill b, .btn, .nav-home, .nav-prev, .nav-next){
  filter:brightness(var(--signal-glow-intensity,1));
}

.subtitle{
  margin-top:var(--space-5);
  font-size:13px;
  letter-spacing:.18em;
  color:rgba(var(--ink-rgb),.76);
}

.status{margin-top:var(--space-7);display:flex;flex-direction:column;gap:var(--space-4);}
.status .line{font-size:14px;letter-spacing:.18em;color:rgba(var(--ink-rgb),.76);}
.status .line .key{color:var(--amber);}
.status .line .val{color:rgba(var(--white-rgb),.84);}

.status .line,
.log-line,
.log-text,
.log-body,
.panel .bd{
  overflow-wrap:anywhere;
  word-break:break-word;
}

.controls{
  margin-top:var(--space-9);
  display:flex;
  flex-wrap:wrap;
  gap:var(--space-5);
  justify-content:center;
}

.feed{
  margin-top:var(--space-6);
  font-size:11px;
  letter-spacing:.12em;
  color:rgba(var(--ink-rgb),.58);
  opacity:.9;
  display:flex;
  gap:var(--space-6);
  align-items:center;
  justify-content:center;
  flex-wrap:wrap;
}
.feed .label{color:rgba(var(--cyan-rgb),.82);}
.feed .item{
  border:1px solid rgba(var(--ink-rgb),.12);
  background:rgba(var(--black-rgb),.18);
  border-radius:999px;
  padding:var(--space-3) var(--space-6);
  white-space:nowrap;
}

.btn{
  border:1px solid rgba(var(--ink-rgb),.18);
  background:rgba(var(--black-rgb),.18);
  color:rgba(var(--ink-rgb),.75);
  font-family:var(--mono);
  letter-spacing:.16em;
  font-size:11px;
  padding:var(--space-4) var(--space-6);
  border-radius:999px;
  cursor:pointer;
  transition:transform .12s ease,border-color .12s ease,color .12s ease,box-shadow .12s ease,background .12s ease;
  user-select:none;
  touch-action:manipulation;
  text-decoration:none;
  display:inline-flex;
  align-items:center;
  gap:var(--space-4);
}
.btn:hover{
  border-color:rgba(var(--cyan-rgb),.35);
  color:rgba(var(--white-rgb),.9);
  box-shadow:0 0 24px rgba(var(--cyan-rgb),calc(.10 * var(--ui-glow-multiplier,1) * var(--signal-glow-intensity,1)));
  transform:translateY(-1px);
}
.btn.primary{
  border-color:rgba(var(--amber-rgb),.55);
  color:var(--amber);
  box-shadow:0 0 26px rgba(var(--amber-rgb),calc(.10 * var(--ui-glow-multiplier,1) * var(--signal-glow-intensity,1)));
}
.btn.primary:hover{
  background:rgba(var(--amber-rgb),.06);
  box-shadow:0 0 30px rgba(var(--amber-rgb),calc(.16 * var(--ui-glow-multiplier,1) * var(--signal-glow-intensity,1)));
}

.dock{
  display:flex;
  flex-direction:column;
  flex:1;
  gap:var(--gap);
}
.dock .panel{min-height:0;display:flex;flex-direction:column;flex:1;}
.center .dock .panel .bd{font-size:18px;opacity:1;flex:1;overflow:auto;}

.bottombar{
  grid-area:bottom;
  display:flex;
  justify-content:space-between;
  align-items:flex-end;
  gap:var(--space-7);
  padding:var(--space-5) var(--space-6);
  border:1px solid var(--border-2);
  border-radius:var(--radius-sm);
  background:rgba(0,0,0,.24);
}
.bottombar .left{
  max-width:65%;
  color:rgba(var(--ink-rgb),.58);
  font-size:11px;
  letter-spacing:.12em;
  line-height:1.3;
}
.bottombar .right{
  text-align:right;
  color:rgba(var(--ink-rgb),.58);
  font-size:11px;
  letter-spacing:.12em;
  line-height:1.3;
  white-space:nowrap;
}
.bottombar .right b{color:var(--amber);}
#footerRight{min-width:24ch;}
#avail,
#system-uptime{
  display:inline-block;
  text-align:right;
  font-variant-numeric:tabular-nums;
  font-feature-settings:"tnum" 1;
}
#avail{min-width:4ch;}
#system-uptime{min-width:12ch;}

.glitch-invert{filter:invert(1) hue-rotate(180deg);}
.glitch-shift{transform:translateX(2px);}
.glitch-dim{opacity:.35;}

.log-text{text-transform:none;}
.log-text p{margin:0 0 var(--space-9);white-space:pre-wrap;}
.log-text p:last-child{margin-bottom:0;}
.log-text strong{
  color:rgba(var(--white-rgb),.98);
  font-weight:600;
  font-size:19px;
  text-shadow:0 0 10px rgba(var(--cyan-rgb),.18);
}
.log-text em{
  color:rgba(var(--cyan-rgb),.94);
  font-style:normal;
  font-size:18px;
  text-shadow:0 0 8px rgba(var(--cyan-rgb),.14);
}
.log-text code,.log-text pre{
  font-family:var(--mono);
  font-size:16px;
  color:rgba(var(--white-rgb),.92);
  background:rgba(0,0,0,.38);
  border:1px solid rgba(var(--ink-rgb),.18);
  border-radius:10px;
  text-shadow:0 0 8px rgba(var(--cyan-rgb),.10);
  white-space:pre-wrap;
}
.log-text code{padding:var(--space-1) var(--space-5);display:inline-block;line-height:1.6;}
.log-text pre{padding:var(--space-8) var(--space-9);overflow:auto;line-height:1.7;margin:var(--space-7) 0;}

.log-entry{
  border:1px solid rgba(var(--ink-rgb),.12);
  border-radius:12px;
  background:rgba(var(--black-rgb),.18);
  margin:0 0 var(--space-5);
  overflow:hidden;
}
.log-entry summary{
  cursor:pointer;
  list-style:none;
  padding:var(--space-6);
  border-bottom:1px solid rgba(var(--ink-rgb),.10);
  color:rgba(var(--white-rgb),.86);
  letter-spacing:.14em;
  font-size:12px;
}
.log-entry summary::-webkit-details-marker{display:none;}
.log-entry[open] summary{background:rgba(var(--white-rgb),.02);}
.log-grid{padding:var(--space-6);display:grid;gap:var(--space-4);}
.log-grid .log-title{color:rgba(var(--cyan-rgb),.86);letter-spacing:.12em;font-size:12px;}

.meta-line{display:flex;flex-wrap:wrap;gap:var(--space-4);align-items:center;}
.meta-pill{
  border:1px solid rgba(var(--ink-rgb),.12);
  background:rgba(var(--black-rgb),.18);
  border-radius:999px;
  padding:var(--space-3) var(--space-5);
  font-size:10px;
  letter-spacing:.12em;
  color:rgba(var(--ink-rgb),.66);
  white-space:nowrap;
}

.log-body{white-space:pre-wrap;word-break:break-word;}

.log-line{
  display:block;
  padding:var(--space-5) var(--space-6);
  border:1px solid rgba(var(--ink-rgb),.12);
  background:rgba(var(--black-rgb),.18);
  border-radius:12px;
  color:rgba(var(--ink-rgb),.82);
  text-decoration:none;
  margin:0 0 var(--space-5);
  letter-spacing:.12em;
  font-size:11px;
}
.log-line.naked,
.log-link-text.naked{
  border:0;
  background:none;
  box-shadow:none;
  padding:0;
  margin:0;
  border-radius:0;
  font-size:inherit;
  line-height:inherit;
  letter-spacing:inherit;
}
a.log-line.naked,
a.log-link-text.naked{
  min-height:24px;
  padding-top:2px;
  padding-bottom:2px;
}
.log-line:hover{
  border-color:rgba(var(--cyan-rgb),.28);
  color:rgba(var(--white-rgb),.90);
  box-shadow:0 0 18px rgba(var(--cyan-rgb),.08);
}
button.log-line{
  appearance:none;
  border:0;
  background:none;
  margin:0;
  width:100%;
  text-align:left;
  color:inherit;
  font:inherit;
  letter-spacing:inherit;
  cursor:pointer;
}
button.log-line:focus-visible{
  outline:1px solid rgba(var(--ink-rgb),.25);
  outline-offset:2px;
}
.log-line .log-id{color:rgba(var(--amber-rgb),.92);margin-right:var(--space-4);}
.log-line .log-date{color:rgba(var(--ink-rgb),.55);margin-left:var(--space-4);}

.scan-deep-switch{
  display:inline-flex;
  align-items:center;
  gap:var(--space-2);
  cursor:pointer;
}
.scan-deep-sep{color:rgba(var(--ink-rgb),.55);}
.scan-deep-opt{transition:color .12s ease,text-shadow .12s ease;}
.scan-deep-switch .scan-deep-opt-on,
.scan-deep-switch .scan-deep-opt-off{color:var(--amber-muted);}
.scan-deep-switch.is-deep-on .scan-deep-opt-on{
  color:rgba(var(--cyan-rgb),.96);
  text-shadow:0 0 11px rgba(var(--cyan-rgb),.22);
}
.scan-deep-switch.is-deep-on .scan-deep-opt-off{
  color:var(--amber-muted);
  text-shadow:none;
}
.scan-deep-switch.is-deep-off .scan-deep-opt-on{
  color:var(--amber-muted);
  text-shadow:none;
}
.scan-deep-switch.is-deep-off .scan-deep-opt-off{
  color:rgba(var(--cyan-rgb),.96);
  text-shadow:0 0 11px rgba(var(--cyan-rgb),.22);
}

.recent-logs .log-entry{border:0;background:none;margin:0 0 var(--space-4);border-radius:0;}
.recent-logs .log-entry summary{display:none;}
.recent-logs .log-entry-body{padding:0;}
.recent-logs .logs{padding:0;display:flex;flex-direction:column;gap:0;}

.recent-logs :is(.log-line.naked,.log-link-text.naked){
  display:block;
  padding:0;
  text-decoration:none;
  color:inherit;
  opacity:.78;
  transition:opacity .12s ease,text-shadow .12s ease;
}
.recent-logs :is(.log-line.naked,.log-link-text.naked):hover{
  opacity:1;
  text-decoration:underline;
}
.recent-logs :is(.log-line.naked,.log-link-text.naked):focus-visible{
  outline:1px solid rgba(var(--ink-rgb),.25);
  outline-offset:2px;
  opacity:1;
}
.recent-logs .log-line.naked .log-id,.recent-logs .log-line.naked .log-tag{color:inherit;margin:0;}
.recent-logs .log-line.naked{display:flex;align-items:baseline;width:100%;}
.recent-logs .log-line.naked .log-id{flex:0 0 auto;white-space:nowrap;margin-right:.45em;opacity:.95;}
.recent-logs .log-line.naked .log-tag{
  flex:1 1 auto;
  min-width:0;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  opacity:.85;
}
.recent-logs .log-line.naked.is-current{opacity:1;}
.recent-logs .log-line.naked.is-current .log-id,
.recent-logs .log-line.naked.is-current .log-tag{
  color:rgba(var(--amber-rgb),.92);
  opacity:1;
}
.recent-logs .log-line.naked.is-current::before{
  content:">";
  width:1.2ch;
  margin-right:.35em;
  color:rgba(var(--amber-rgb),.92);
}
.recent-logs .recent-log-item::before{
  content:attr(data-prefix) " ";
  width:1.2ch;
  color:rgba(var(--white-rgb),.90);
}
.recent-logs .recent-log-item[data-prefix=">"]{
  color:rgba(var(--white-rgb),.96);
  text-shadow:0 0 8px rgba(var(--cyan-rgb),calc(.14 * var(--ui-glow-multiplier,1) * var(--signal-glow-intensity,1)));
}
.recent-logs .recent-log-next{
  justify-content:flex-end;
  margin-top:var(--space-5);
  text-align:right;
  opacity:.78;
  text-decoration:none;
  cursor:default;
  pointer-events:none;
  transition:none;
}
.recent-logs .recent-log-next:hover{
  opacity:.78;
  text-decoration:none;
  color:inherit;
  text-shadow:none;
}

#recentLogsPanel,#disruptionNodesPanel{min-height:clamp(140px,22vh,210px);}
#recentLogsPanel .bd,#disruptionNodesPanel .bd{padding-inline:var(--space-7);}
#disruptionNodesPanel .log-line.naked{padding:var(--space-2) 0;}
#disruptionNodesPanel .log-line.naked:hover{text-decoration:underline;}
#disruptionNodesPanel .log-line.naked .log-id{color:rgba(var(--amber-rgb),.92);}
#disruptionNodesPanel .log-line.naked.is-current{opacity:1;}
#disruptionNodesPanel .log-line.naked.is-current .log-id,
#disruptionNodesPanel .log-line.naked.is-current .log-tag{
  color:rgba(var(--amber-rgb),.92);
  opacity:1;
}
#disruptionNodesPanel .log-line.naked.is-current::before{
  content:">";
  width:1.2ch;
  margin-right:.35em;
  color:rgba(var(--amber-rgb),.92);
}
